
{{- $v := .Values }}
{{ $ := . }}
{{- if $v.nativeSecrets }}
apiVersion: v1
kind: Secret
metadata:
  labels: {{- include "jobs.labels" $ | nindent 4 }}
  name: {{ .Release.Name }}
data:
{{- range $key, $val := $v.nativeSecrets }}
  {{ $key }}: "{{ $val | b64enc }}"
{{- end }}
---
{{- end }}
{{- if hasKey $v "init" }}
{{- with $v.init.nativeSecrets }}
apiVersion: v1
kind: Secret
metadata:
  labels: {{- include "jobs.labels" $ | nindent 4 }}
  name: {{ $.Release.Name }}-init
data:
{{- range $key, $val := . }}
  {{ $key }}: "{{ $val | b64enc }}"
{{- end }}
---
{{- end }}
{{- end }}